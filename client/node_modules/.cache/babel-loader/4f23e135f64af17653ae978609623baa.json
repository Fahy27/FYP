{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\evanf\\\\Downloads\\\\Archive\\\\client\\\\src\\\\components\\\\Navbar\\\\Navbar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { AppBar, Typography, Toolbar, Avatar, Button, MenuItem } from '@material-ui/core';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\nimport memoriesLogo from '../../images/memoriesLogo.png';\nimport memoriesText from '../../images/memoriesText.png';\nimport * as actionType from '../../constants/actionTypes';\nimport useStyles from './styles';\nimport { api } from '../../api/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Navbar = () => {\n  _s();\n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const [userParsed, setUserParsed] = useState(null);\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const logout = () => {\n    dispatch({\n      type: actionType.LOGOUT\n    });\n    history.push('/auth');\n    setUser(null);\n  };\n\n  useEffect(() => {\n    const token = user === null || user === void 0 ? void 0 : user.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location]);\n  useEffect(() => {\n    async function getUser() {\n      try {\n        const userFetch = await api.get(\"/user/getData\");\n        console.log(userFetch.data);\n        setUserParsed(userFetch.data);\n      } catch (err) {\n        setUserParsed(null);\n      }\n    }\n\n    getUser();\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(AppBar, {\n    className: classes.appBar,\n    position: \"static\",\n    color: \"inherit\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: classes.brandContainer,\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h2\",\n        children: \"MCQ\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/exam\",\n      className: classes.navLink,\n      children: /*#__PURE__*/_jsxDEV(MenuItem, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          textAlign: \"center\",\n          children: \"Start exam\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/rewards\",\n      className: classes.navLink,\n      children: /*#__PURE__*/_jsxDEV(MenuItem, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          textAlign: \"center\",\n          children: \"Rewards\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/createQuestion\",\n      className: classes.navLink,\n      children: /*#__PURE__*/_jsxDEV(MenuItem, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          textAlign: \"center\",\n          children: \"Add question\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n      className: classes.toolbar,\n      children: userParsed != null ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.profile,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          className: classes.purple,\n          alt: user === null || user === void 0 ? void 0 : user.result.name,\n          src: user === null || user === void 0 ? void 0 : user.result.imageUrl,\n          children: user === null || user === void 0 ? void 0 : user.result.name.charAt(0)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.userName,\n          variant: \"h6\",\n          children: userParsed === null || userParsed === void 0 ? void 0 : userParsed.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.cashIndicator,\n          variant: \"h6\",\n          children: [\"Cash: \", userParsed === null || userParsed === void 0 ? void 0 : userParsed.currency]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          className: classes.logout,\n          color: \"secondary\",\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        component: Link,\n        to: \"/auth\",\n        variant: \"contained\",\n        color: \"primary\",\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Navbar, \"Uj+O5kqefJLi/KPcuuwVGWQF9SQ=\", false, function () {\n  return [useDispatch, useLocation, useHistory, useStyles];\n});\n\n_c = Navbar;\nexport default Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","MenuItem","Link","useHistory","useLocation","useDispatch","decode","memoriesLogo","memoriesText","actionType","useStyles","api","Navbar","user","setUser","JSON","parse","localStorage","getItem","userParsed","setUserParsed","dispatch","location","history","classes","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","getUser","userFetch","get","console","log","data","err","appBar","brandContainer","navLink","toolbar","profile","purple","result","name","imageUrl","charAt","userName","cashIndicator","currency"],"sources":["C:/Users/evanf/Downloads/Archive/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppBar, Typography, Toolbar, Avatar, Button, MenuItem } from '@material-ui/core';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport decode from 'jwt-decode';\n\nimport memoriesLogo from '../../images/memoriesLogo.png';\nimport memoriesText from '../../images/memoriesText.png';\nimport * as actionType from '../../constants/actionTypes';\nimport useStyles from './styles';\nimport { api } from '../../api/index'\n\n\nconst Navbar = () => {\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n  const [userParsed, setUserParsed] = useState(null)\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const logout = () => {\n    dispatch({ type: actionType.LOGOUT });\n\n    history.push('/auth');\n\n    setUser(null);\n  };\n\n  \n\n  useEffect(() => {\n    const token = user?.token;\n\n    if (token) {\n      const decodedToken = decode(token);\n\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n    }\n\n    setUser(JSON.parse(localStorage.getItem('profile')));\n  }, [location]);\n\n  useEffect(() => {\n    async function getUser() {\n      try {\n        const userFetch = await api.get(\"/user/getData\")\n        console.log(userFetch.data)\n        setUserParsed(userFetch.data)\n      } catch(err) {\n        setUserParsed(null)\n      }\n    }\n    getUser()\n    \n  }, [user])\n\n  return (\n    <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n      <Link to=\"/\" className={classes.brandContainer}>\n        <Typography variant=\"h2\">MCQ</Typography>\n      </Link>\n      <Link to=\"/exam\" className={classes.navLink}>\n        <MenuItem>\n          <Typography textAlign=\"center\">Start exam</Typography>\n        </MenuItem>\n      </Link>\n      <Link to=\"/rewards\" className={classes.navLink}>\n        <MenuItem>\n          <Typography textAlign=\"center\">Rewards</Typography>\n        </MenuItem>\n      </Link>\n      <Link to=\"/createQuestion\" className={classes.navLink}>\n        <MenuItem>\n          <Typography textAlign=\"center\">Add question</Typography>\n        </MenuItem>\n      </Link>\n\n      \n      <Toolbar className={classes.toolbar}>\n        {userParsed != null ? (\n          <div className={classes.profile}>\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n            <Typography className={classes.userName} variant=\"h6\">{userParsed?.name}</Typography>\n            <Typography className={classes.cashIndicator} variant=\"h6\">Cash: {userParsed?.currency}</Typography>\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\n          </div>\n        ) : (\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}